<!-- <!DOCTYPE html>
<html lang="en">

<head>
  {% load static %}
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial- scale=1.0">
  <link rel="stylesheet" href="{% static '/CSS/faculty.css' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Fraunces:ital,opsz,wght@0,9..144,700;1,9..144,700&family=Inter:wght@200;300&display=swap"
    rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="index.js"></script>
  <title>Dashboard</title>
</head>

<body>
  <div class="full-Dashboard">

    <div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark" style="width: 280px;">
      <span class="fs-4" style="font-weight: bold;">GECM System</span>

      <hr>
      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
          <button type="button" class="btn btn-primary">Dashboard</button>
          </svg>


        </li>
        <li>
          <button type="button" class="btn btn-primary">Profile</button>
        </li>
        <li>
          <button type="button" class="btn btn-primary">Attendance</button>
        </li>
        <li>
          <button type="button" class="btn btn-primary">class-report</button>
        </li>
        <li>
          <button type="button" class="btn btn-primary">Student-report</button>
        </li>
      </ul>
      <hr>
      <div class="dropdown">
        <button type="button" class="btn btn-primary">Sign-Out</button>

      </div>
    </div>


 


  </div>
  <script>
    input = document.getElementsByTagName("input");
    document.getElementsByClassName("btn btn-primary beside-date")[0].addEventListener("click", function () {
      for (var i = 0; i < input.length; i++) {
        if (input[i].type == "checkbox") {
          input[i].checked = true;
        }
      }
    })
  </script>
</body>

</html> -->



<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300i,400,700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.1.js" integrity="sha256-3zlB5s2uwoUzrXK3BT7AX3FyvojsraNFxCc2vC/7pNI="
    crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">

  <script src="https://code.jquery.com/jquery-3.6.2.js" integrity="sha256-pkn2CUZmheSeyssYw3vMp1+xyub4m+e+QK4sQskvuo4="
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/0bd7fd1f80.js" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="/CSS/faculty/faculty.css'">
  <link rel="stylesheet" href="/CSS/admin/addStudent.css">

  <link rel="stylesheet" href="/CSS/admin/admin.css">



  <title>Student Registration Form In Bootstrap 5 </title>

</head>

<body style="background-color: rgb(221, 221, 221);">



  <div class="container-dashboard">
    <div class="logout">
      <form action="/users/logout" method="get">
        <h2>Do you want to logout?</h2>
        <button type="submit" class="btn btn-primary">Yes</button>
        <button type="button" class="btn btn-primary" onclick="hideLogout()">Cancel</button>
      </form>
    </div>
    <div class="navbar-dashboard-for-student" style="z-index: 1;">
      <div class="bars" onclick="myFunction(this)">
        <div class="bar1"></div>
        <div class="bar2"></div>
        <div class="bar3"></div>
      </div>
      <!-- <i class="fa-solid fa-bars fs-1x" onclick="myFunction()"></i> -->
      <div class="navbar-text-for-student">
        Student Management System

      </div>

    </div>
    <div class="left-bar-for-student" style="font-family: sans-serif;">
      <div class="left-bar-title" style="height: 97px; padding-top: 10px;">
        <div class="image-logo">
          <img src="/images/logo.png" alt="" srcset="">

        </div>
        <div class=" gecm-title" style="padding-top: 10px; font-size: 2.5rem; text-align: center;">
          GECM
        </div>
      </div>
      <!-- <hr> -->
      <a href="/users/faculty/facultyHome" style="padding: 10px 20px;">
        <i class="fa-solid fa-gauge fs-1x fa-fw"></i><span class="link-text">Home</span></a>
      <a href="/users/faculty/selectClass"><i class="fa-solid fa-list-check fs-1x fa-fw"></i><span
          class="link-text">Take
          Attendance</span></a>
      <a href="/users/faculty/view_attendance"><i class="fa-regular fa-calendar-days fs-1x fa-fw"></i><span
          class="link-text">View
          Attendance</span></a>
      <a href="#" onclick="displayLogout();"><i class="fa-solid fa-book fs-1x fa-fw"></i><span
          class="link-text">Logout</span></a>


    </div>
    <div class="right-side">


      <div class="card">
        <div class="card-header" style="font-weight: bold;">
          Mark Attendance
        </div>
        <div class="card-body">
          <p class="card-text-mark-attendance">COURSE : CE
            <span class="separator"> || </span>
            Sem - 6
            <span class="separator"> || </span>
            <%= subject %>
          </p>

          <div class="text-date">
            DATE <span style="margin-left: 20px;">
              <%=new Date().toLocaleDateString()%>
            </span>
          </div>
          <button type="button" class="btn btn-primary beside-date">All-Present</button>
          <table class="table">
            <thead class="table-dark">
              <tr>
                <th scope="col">Enrollment No.</th>
                <th scope="col" style="width: 40%;">Student Name</th>
                <th scope="col">Select </th>
              </tr>
            </thead>


            <form action="/users/faculty/mark-attendance" method="post">

              <% students.forEach(function (s) {%>
                <tr>
                  <th scope="row">
                    <%= s.enrollment_number %>
                  </th>
                  <td>
                    <%= s.name %>
                  </td>
                  <td><input type="checkbox" name="attendance_numbers" value="<%= s.enrollment_number %>"
                      id="enrollment" /></td>
                </tr>
                <input type="hidden" value="<%= subject %>" name="subject">
                <%});%>
                  <input type="submit" class="btn btn-primary" value="Mark-Attendance" id="mark-attendance-btn">

            </form>
            <button type="button" value="" class="btn btn-primary" style="margin-left: 7px;" id="sendMail">Send
              Mail</button>


          </table>

        </div>
      </div>


    </div>





  </div>

  <script>
    input = document.getElementsByTagName("input");
    document.getElementsByClassName("btn btn-primary beside-date")[0].addEventListener("click", function () {
      for (var i = 0; i < input.length; i++) {
        if (input[i].type == "checkbox") {
          input[i].checked = true;
        }
      }
    })

    function myFunction(x) {
      element = $(".left-bar-for-student");
      if (element.css("display") == "none") {
        $(".navbar-dashboard-for-student").css("margin-left", "270px");
        $(".left-bar-for-student").css("display", "block");
        x.classList.toggle("change");
        $(".right-side").css("margin-left", "280px");

      } else {
        element.css("display", "none");
        $(".navbar-dashboard-for-student").css("margin-left", "0");
        $(x).removeClass("change");
        $(".right-side").css("margin-left", "10px");


      }
    }

    function change(x) {
      x.classList.toggle("change");
    }

    // Get all the checkbox elements in the document

    $('#mark-attendance-btn').click(function (event) {
      // Prevent the default form submission
      event.preventDefault();

      // Get the form data
      const arr = [];
      let subject = document.getElementsByName("subject")[0].value;
      var checkboxes = document.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach((checkbox) => {
        arr.push(checkbox.value);
      });

      // Do your stuff with the form data here

      // // Manually submit the form data using $.ajax()
      // $.ajax({

      //   type: 'POST',
      //   url: '/users/faculty/mark-attendance',
      //   data: formData
      // });

      $.post('/users/faculty/mark-attendance', { data: arr, subject: subject }, function (response) {
        console.log('Response from server:', response);
        window.location.href = "/users/faculty/facultyHome";
      });
    });

    $('#sendMail').click(function (event) {
      // Prevent the default form submission
      event.preventDefault();

      // Get the form data
      const arr = [];
      var checkboxes = document.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach((checkbox) => {
        arr.push(checkbox.value);
      });

      $.post('/users/faculty/sendMail', { data: arr }, function (response) {
        console.log('Response from server:', response);
        window.location.href = "/users/faculty/facultyHome";
      });
    });
    function hideLogout() {
      var logoutElement = document.querySelector('.logout');
      logoutElement.style.display = 'none';
    }
    function displayLogout() {
      var logoutElement = document.getElementsByClassName("logout")[0];
      logoutElement.style.display = 'block';
    }
  </script>
</body>


</html>